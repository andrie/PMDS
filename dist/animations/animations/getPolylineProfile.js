import{n as O,L as M,U as P}from"./makeScene2D.js";function x(e,w,b){const n={arcLength:0,segments:[],minSin:1};if(e.length===0)return n;if(b){const t=e[0].add(e[e.length-1]).scale(.5);e.unshift(t),e.push(t)}let l=e[0];for(let t=2;t<e.length;t++){const z=e[t-2],a=e[t-1],D=e[t],h=z.sub(a),m=D.sub(a),c=h.normalized.safe,s=m.normalized.safe,u=Math.acos(O(-1,1,c.dot(s))),r=Math.tan(u/2),i=Math.sin(u/2),o=Math.min(w,r*h.magnitude*(t===2?1:.5),r*m.magnitude*(t===e.length-1?1:.5)),T=i===0?0:o/i,f=r===0?0:o/r,p=c.add(s).scale(1/2).normalized.safe.scale(T).add(a),d=c.perpendicular.dot(s)<0,L=new M(l,a.add(c.scale(f))),S=new P(p,o,c.perpendicular.scale(d?1:-1),s.perpendicular.scale(d?-1:1),d);n.segments.push(L),n.segments.push(S),n.arcLength+=L.arcLength,n.arcLength+=S.arcLength,n.minSin=Math.min(n.minSin,Math.abs(i)),l=a.add(s.scale(f))}const g=new M(l,e[e.length-1]);return n.segments.push(g),n.arcLength+=g.arcLength,n}export{x as g};
